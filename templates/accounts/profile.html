{% extends "base.html" %}

{% block title %}{% endblock %}

{% block content %}
<div class="profile-container">
    <h1>Профиль</h1>
    <div class="profile-card">
        <p><strong>Логин:</strong> {{ request.user.username }}</p>
        <p><strong>Email:</strong> {{ request.user.email|default:"—" }}</p>
        {% if request.user.profile %}
            <div class="profile-status">
                <p><strong>Email подтвержден:</strong> 
                    {% if request.user.profile.email_verified %}
                        <span class="status-badge status-success">✓ Да</span>
                    {% else %}
                        <span class="status-badge status-warning">✗ Нет</span>
                        <form method="post" action="{% url 'accounts:resend_verification' %}" style="display: inline;">
                            {% csrf_token %}
                            <button type="submit" class="btn-small btn-secondary">Отправить повторно</button>
                        </form>
                    {% endif %}
                </p>
                <p><strong>Одобрен администратором:</strong> 
                    {% if request.user.profile.admin_approved %}
                        <span class="status-badge status-success">✓ Да</span>
                    {% else %}
                        <span class="status-badge status-pending">⏳ Ожидает</span>
                    {% endif %}
                </p>
                <p><strong>Статус аккаунта:</strong> {{ request.user.profile.is_pro|yesno:"Pro,Базовый" }}</p>
            </div>
            
            {% if not request.user.profile.email_verified %}
                <div class="profile-alert alert-warning">
                    <p>⚠️ Пожалуйста, подтвердите ваш email адрес для доступа к скринеру.</p>
                </div>
            {% elif not request.user.profile.admin_approved %}
                <div class="profile-alert alert-info">
                    <p>ℹ️ Ваш аккаунт ожидает одобрения администратором. Вы получите уведомление после одобрения.</p>
                </div>
            {% else %}
                <div class="profile-alert alert-success">
                    <p>✓ Ваш аккаунт активен. Вы можете использовать все функции скринера.</p>
                </div>
            {% endif %}
        {% endif %}
    </div>
</div>
{% endblock %}


